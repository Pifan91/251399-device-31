const slider = document.querySelector(".slider"), sliderItems = slider.querySelectorAll(".slider__item"), sliderItemWidth = sliderItems[0].offsetWidth, sliderWidth = sliderItems.length * sliderItemWidth + "px", sliderToggles = document.querySelectorAll(".slider-toggle-list__button"), sliderTogglesActive = "slider-toggle-list__button--active", servicesItems = document.querySelectorAll(".services-list__item"), servicesToggles = document.querySelectorAll(".services-toggle-list__button"), servicesTogglesActive = "services-toggle-list__button--checked", popupOpenButton = document.getElementById("showPopup"), popup = document.querySelector(".popup"), popupForm = document.querySelector(".popup-form"), popupFormName = document.getElementById("popup-name"), popupFormEmail = document.getElementById("popup-email"), popupCloseButton = popup.querySelector(".close-button"), popupMapOpenButton = document.getElementById("showMap"), popupMap = document.querySelector(".popup-map"), popupMapCloseButton = popupMap.querySelector(".close-button"); let isStorageSupport = !0, storage = ""; try { storage = localStorage.getItem("login") } catch (e) { isStorageSupport = !1 } function setValues(e, o) { e.forEach(function (e, p) { e.value = p, e.addEventListener("click", o) }) } function changeSlide(e) { e.preventDefault(), e.target.classList.contains(sliderTogglesActive) || (sliderToggles.forEach(function (e) { e.classList.remove(sliderTogglesActive) }), e.target.classList.add(sliderTogglesActive), slider.style.transform = "translateX(-" + sliderItemWidth * e.target.value + "px)") } function changeServices(e) { e.preventDefault(), e.target.classList.contains(servicesTogglesActive) || (servicesToggles.forEach(function (e) { e.classList.remove(servicesTogglesActive) }), servicesItems.forEach(function (e) { e.classList.remove("services-list__item--active") }), e.target.classList.add(servicesTogglesActive), servicesItems[e.target.value].classList.add("services-list__item--active")) } function popupOpenHandler(e) { e.preventDefault(), showPopup(popup, "popup--show"), storage ? (popupFormName.value = storage, popupFormEmail.focus()) : popupFormName.focus() } function popupCloseHandler(e) { e.preventDefault(), popup.classList.contains("popup--error") && popup.classList.remove("popup--error"), closePopup(popup, "popup--show") } function popupMapOpenHandler(e) { e.preventDefault(), showPopup(popupMap, "popup-map--show") } function popupMapCloseHandler(e) { e.preventDefault(), closePopup(popupMap, "popup-map--show") } function showPopup(e, p) { e.classList.add(p) } function closePopup(e, p) { e.classList.remove(p) } function closePopupWithKey(e) { 27 === e.keyCode && (popup.classList.contains("popup--show") ? (e.preventDefault(), popup.classList.remove("popup--error")) : popupMap.classList.contains("popup-map--show") && (e.preventDefault(), popupMap.classList.remove("popup-map--show"))) } function formValidation(e) { popupFormName.value && popupFormEmail.value ? isStorageSupport && localStorage.setItem("login", popupFormName.value) : (e.preventDefault(), popup.classList.remove("popup--error"), popup.offsetWidth = popup.offsetWidth, popup.classList.add("popup--error")) } slider.style.width = sliderWidth, setValues(sliderToggles, changeSlide), setValues(servicesToggles, changeServices), popupOpenButton.addEventListener("click", popupOpenHandler), popupCloseButton.addEventListener("click", popupCloseHandler), popupMapOpenButton.addEventListener("click", popupMapOpenHandler), popupMapCloseButton.addEventListener("click", popupMapCloseHandler), popupForm.addEventListener("submit", formValidation), window.addEventListener("keydown", closePopupWithKey);
